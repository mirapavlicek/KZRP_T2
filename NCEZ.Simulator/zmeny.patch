--- a/src/NCEZ.Simulator/Program.cs
+++ b/src/NCEZ.Simulator/Program.cs
@@ -10,8 +10,12 @@
 var builder = WebApplication.CreateBuilder(args);

 // Services
-builder.Services.AddControllers()
-    .ConfigureApiBehaviorOptions(o => { o.SuppressModelStateInvalidFilter = true; });
+builder.Services.AddControllers(options =>
+{
+    // jednotné vracení 422 z ValidateModelFilter
+    options.Filters.Add<ValidateModelFilter>();
+})
+    .ConfigureApiBehaviorOptions(o => { o.SuppressModelStateInvalidFilter = true; });
 builder.Services.AddEndpointsApiExplorer();
 builder.Services.AddSwaggerGen(c =>
 {
@@ -33,14 +37,11 @@
 builder.Services.AddSingleton(new StorageOptions(dataRoot));
 builder.Services.AddSingleton(typeof(IJsonRepository<>), typeof(JsonRepository<>));
 builder.Services.AddSingleton<CodeSetService>();
 builder.Services.AddSingleton<RidService>();
- builder.Services.AddControllers(options => options.Filters.Add<ValidateModelFilter>());
+builder.Services.AddSingleton<HdrValidator>(); // ← registrace chybějící služby

-builder.Services.AddMvc(options =>
-{
-    options.Filters.Add<ValidateModelFilter>();
-});
+// AddMvc/duplicitní přidání filtru není potřeba

 var app = builder.Build();
 